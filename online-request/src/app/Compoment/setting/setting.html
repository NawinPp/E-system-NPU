<div class="min-h-screen bg-gray-100 flex items-center justify-center p-4">
  <div class="w-full max-w-2xl bg-white rounded-xl shadow-md overflow-hidden">
    <div class="flex flex-col sm:flex-row items-center sm:items-start p-6 gap-30">
      
      <!-- รูปนักศึกษา -->
      <img 
        class="h-32 w-32 sm:h-40 sm:w-40 rounded-full object-cover border-2 border-gray-300 mt-10"
        [src]="student.photo ? student.photo : 'https://via.placeholder.com/150/CCCCCC/FFFFFF?text=User'" 
        alt="User Picture"
      >

      <!-- ข้อมูลนักศึกษา -->
      <div class="flex-1">
        <h2 class="text-2xl font-semibold text-gray-800">{{ student.name }}</h2>
        <p class="text-gray-600">Student ID: {{ student.studentId }}</p>
        <p class="text-gray-600">Major: {{ student.major }}</p>
        <p class="text-gray-600">Faculty: {{ student.faculty }}</p>
        <p class="text-gray-600">Year: {{ student.year }}</p>
        <p class="text-gray-600">GPA: {{ student.gpa }}</p>
        <p class="text-gray-600">Adviser: {{ student.adviser }}</p>
        <p class="text-gray-600">{{ student.email }}</p>
        <button 
          (click)="openEditModal()" 
          class="mt-4 px-5 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition cursor-pointer"
        >
          Edit
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Edit Modal -->
<div *ngIf="showEditModal" class="fixed inset-0 flex items-center justify-center z-[1000] bg-black/30 p-4">
  <div class="bg-white rounded-lg shadow-lg w-full max-w-3xl p-6 overflow-auto">
    <h2 class="text-xl font-bold mb-6 text-center">Edit Student</h2>
    <form (ngSubmit)="update()" class="flex flex-col md:flex-row gap-6">
      
      <!-- รูป + เลือกรูป -->
      <div class="flex-shrink-0 flex flex-col items-center">
        <img 
          class="h-32 w-32 rounded-full object-cover border-2 border-gray-300 mb-4"
          [src]="selectedPhoto ? selectedPhoto : editData.photo ? editData.photo : 'https://via.placeholder.com/150/CCCCCC/FFFFFF?text=User'" 
          alt="Preview"
        >
        <label class="cursor-pointer bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition text-sm">
          Choose Photo
          <input type="file" (change)="onPhotoSelected($event)" class="hidden"/>
        </label>
      </div>

      <!-- ฟอร์มข้อมูล -->
      <div class="flex-1 grid grid-cols-1 sm:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium mb-1">Name</label>
          <input type="text" [(ngModel)]="editData.name" name="editName" required class="w-full border rounded px-3 py-2"/>
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">Major</label>
          <input type="text" [(ngModel)]="editData.major" name="editMajor" required class="w-full border rounded px-3 py-2"/>
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">Faculty</label>
          <input type="text" [(ngModel)]="editData.faculty" name="editFaculty" required class="w-full border rounded px-3 py-2"/>
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">Year</label>
          <input type="number" [(ngModel)]="editData.year" name="editYear" required class="w-full border rounded px-3 py-2"/>
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">GPA</label>
          <input type="number" step="0.01" [(ngModel)]="editData.gpa" name="editGPA" required class="w-full border rounded px-3 py-2"/>
        </div>
      </div>
    </form>

    <!-- ปุ่มควบคุม -->
    <div class="flex justify-end mt-6 gap-2">
      <button 
        type="button" 
        (click)="closeEditModal()" 
        class="px-4 py-2 bg-gray-300 rounded hover:bg-gray-400 transition cursor-pointer"
      >
        Cancel
      </button>
      <button 
        type="submit" 
        (click)="update()" 
        class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition cursor-pointer"
      >
        Update
      </button>
    </div>
  </div>
</div>
